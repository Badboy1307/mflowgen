#! /usr/bin/env bash
#=========================================================================
# configure
#=========================================================================
# Configuration involves choosing an assembled flow (i.e.,
# "setup-flow.mk") and also selecting an ASIC design kit and design
# specification (i.e., "Makefrag").

ln -sf ../Makefile.in Makefile

#-------------------------------------------------------------------------
# Default
#-------------------------------------------------------------------------
# Use the default assembled flow if no options are passed in, and also
# pull in the Makefrag (copy it so that many build directories can be made
# that point to different designs)

if [[ x$1 == x"" ]]; then
  ln -sf ../assembled-flows/default/setup-flow.mk
  cp -rf ../Makefrag .
fi

#-------------------------------------------------------------------------
# 180nm-pcosync-chip
#-------------------------------------------------------------------------
# This flow has its own Makefrag

if [[ x$1 == x--180* ]]; then
  ln -sf ../assembled-flows/180nm-pcosync-chip/setup-flow.mk
  ln -sf ../assembled-flows/180nm-pcosync-chip/Makefrag
fi

#-------------------------------------------------------------------------
# 28nm-gcd-chip
#-------------------------------------------------------------------------
# This flow has its own Makefrag

if [[ x$1 == x--28nm-gcd* ]]; then
  ln -sf ../assembled-flows/28nm-gcd-chip/setup-flow.mk
  ln -sf ../assembled-flows/28nm-gcd-chip/Makefrag
fi

#-------------------------------------------------------------------------
# 28nm-pll
#-------------------------------------------------------------------------
# This flow has its own Makefrag

if [[ x$1 == x--28nm-pll* ]]; then
  ln -sf ../assembled-flows/28nm-pll/setup-flow.mk
  ln -sf ../assembled-flows/28nm-pll/Makefrag
fi

